<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch Framework: Acquisition</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Acquisition</h1>  </div>
</div>
<div class="contents">

<p>Generates and executes a configured version of the CVD acquisition routine.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionm_touch___acquisition_data.html">mTouch_AcquisitionData</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure used to implement both a 12-bit and a 20-bit variable inside a single 32-bit array.  <a href="unionm_touch___acquisition_data.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga60426826e876a6a8c03b27b45ba02833">mTouch_Scan</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the framework's active-mode acquisition routine. Sometimes implemented as an ISR, sometimes as a normal function.  <a href="#ga60426826e876a6a8c03b27b45ba02833"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
mTouch Acquisition ISR Variables</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd8ec0cfe8287733f0d3c2a715e39ed21"></a> These variables are used by the ISR of the mTouch Framework and should not be directly accessed by the main loop application. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga6890b3a94dbdd045d66ec2b025cddda6">mTouch_lastResult</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the last active-mode ADC result for differential calculation.  <a href="#ga6890b3a94dbdd045d66ec2b025cddda6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gaf6d2f71af7a6dfd8571cbd141c40053e">mTouch_delayCount</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay counter variable used in CVD scan sequence.  <a href="#gaf6d2f71af7a6dfd8571cbd141c40053e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga800eae7ce7292a55c5d60975179ea26a">mTouch_jitter</a> = 0x55</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the current random seed value for jittering.  <a href="#ga800eae7ce7292a55c5d60975179ea26a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Polishing/Finishing Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpacc1b580f4367c67546fd551b92b246d"></a> These macros perform scaling and final operations before setting the mTouchCVD_dataReady flag and allowing the main loop application to process the new data. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gac88a7c9b9153686bb1057c0a4353afde">STORE_SENSOR</a>(index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales the accumulated result of the CVD acquisition and stores it for main-application access.  <a href="#gac88a7c9b9153686bb1057c0a4353afde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga94581aa84ed2272bebdd8c3c4cff5d21">EXIT_SENSOR</a>(index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the given index variable and exits the ISR.  <a href="#ga94581aa84ed2272bebdd8c3c4cff5d21"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gae6261e6f98f92dcd8c7eef78a41013a7">EXIT_LAST_SENSOR</a>(index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs several important functions after all sensors have been scanned.  <a href="#gae6261e6f98f92dcd8c7eef78a41013a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gab3d78d729df0cac989171ce366cd31eb">SET_DATA_READY_FLAG</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the dataReady flag to signal the main application of a new reading.  <a href="#gab3d78d729df0cac989171ce366cd31eb"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Generates and executes a configured version of the CVD acquisition routine. </p>
<p>The mTouch Acquisition module generates an assembly implementation of the interrupt service routine that is designed to maximize noise immunity and minimize execution time. It will automatically add and remove macros as the number of sensors in the application changes. By default, it will use the previously scanned sensor as the reference for the current scan. If the application only has a single sensor, a special acquisition method which does not require a reference sensor is used. This specialized method should not be used in systems with more than one sensor due to crosstalk concerns. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gae6261e6f98f92dcd8c7eef78a41013a7"></a><!-- doxytag: member="mTouch_macroLibrary_common.h::EXIT_LAST_SENSOR" ref="gae6261e6f98f92dcd8c7eef78a41013a7" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_LAST_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs several important functions after all sensors have been scanned. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index variable to reset to 0 Resets the index variable to 0 for the next scan, decrements the oversampling counter to determine if it is time to complete the sample and store the result, and then exits the ISR. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch__macro_library__common_8h_source.html#l00655">655</a> of file <a class="el" href="m_touch__macro_library__common_8h_source.html">mTouch_macroLibrary_common.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga94581aa84ed2272bebdd8c3c4cff5d21"></a><!-- doxytag: member="mTouch_macroLibrary_common.h::EXIT_SENSOR" ref="ga94581aa84ed2272bebdd8c3c4cff5d21" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Increments the given index variable and exits the ISR. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index variable to increment </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch__macro_library__common_8h_source.html#l00612">612</a> of file <a class="el" href="m_touch__macro_library__common_8h_source.html">mTouch_macroLibrary_common.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab3d78d729df0cac989171ce366cd31eb"></a><!-- doxytag: member="mTouch_macroLibrary_common.h::SET_DATA_READY_FLAG" ref="gab3d78d729df0cac989171ce366cd31eb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_DATA_READY_FLAG</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the dataReady flag to signal the main application of a new reading. </p>

<p>Definition at line <a class="el" href="m_touch__macro_library__common_8h_source.html#l00695">695</a> of file <a class="el" href="m_touch__macro_library__common_8h_source.html">mTouch_macroLibrary_common.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac88a7c9b9153686bb1057c0a4353afde"></a><!-- doxytag: member="mTouch_macroLibrary_common.h::STORE_SENSOR" ref="gac88a7c9b9153686bb1057c0a4353afde" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STORE_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scales the accumulated result of the CVD acquisition and stores it for main-application access. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index of the sensor to be scaled and stored This macro uses the MTOUCH_SCALING configuration option to determine which scaling option to choose. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch__macro_library__common_8h_source.html#l00598">598</a> of file <a class="el" href="m_touch__macro_library__common_8h_source.html">mTouch_macroLibrary_common.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga60426826e876a6a8c03b27b45ba02833"></a><!-- doxytag: member="mTouch_acquisition.c::mTouch_Scan" ref="ga60426826e876a6a8c03b27b45ba02833" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mTouch_Scan </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements the framework's active-mode acquisition routine. Sometimes implemented as an ISR, sometimes as a normal function. </p>
<p>Implements the acquisition process for the mTouch Framework. Please do not modify. </p>

<p>Definition at line <a class="el" href="m_touch__acquisition_8c_source.html#l00184">184</a> of file <a class="el" href="m_touch__acquisition_8c_source.html">mTouch_acquisition.c</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the call graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="group___acquisition_ga60426826e876a6a8c03b27b45ba02833_cgraph.png" border="0" usemap="#group___acquisition_ga60426826e876a6a8c03b27b45ba02833_cgraph" alt=""/></div>
<map name="group___acquisition_ga60426826e876a6a8c03b27b45ba02833_cgraph" id="group___acquisition_ga60426826e876a6a8c03b27b45ba02833_cgraph">
<area shape="rect" id="node3" href="m_touch_8h.html#a5c62bf914c0353b75955a34212c1faae" title="mTouch_ChangeMode" alt="" coords="171,5,320,35"/><area shape="rect" id="node5" href="m_touch__acquisition_8c.html#a76f244c380bcb78535fbc4b5d086b720" title="mTouch_DecimationFilter" alt="" coords="161,59,329,88"/><area shape="rect" id="node8" href="m_touch__acquisition_8c.html#a4b228af88722e7b340ab2fc561309216" title="mTouch_StoreScanA" alt="" coords="173,112,317,141"/><area shape="rect" id="node10" href="m_touch__acquisition_8c.html#af756bb107972edbea40abb69edca89c5" title="mTouch_StoreScanB" alt="" coords="173,165,317,195"/><area shape="rect" id="node12" href="m_touch__acquisition_8c.html#a91439b80a8405a79abffe038c8aba548" title="mTouch_WaitForGoDone" alt="" coords="161,219,329,248"/></map>
<!-- endSectionContent --></div>
</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="group___acquisition_ga60426826e876a6a8c03b27b45ba02833_icgraph.png" border="0" usemap="#group___acquisition_ga60426826e876a6a8c03b27b45ba02833_icgraph" alt=""/></div>
<!-- endSectionContent --></div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gaf6d2f71af7a6dfd8571cbd141c40053e"></a><!-- doxytag: member="mTouch_acquisition.c::mTouch_delayCount" ref="gaf6d2f71af7a6dfd8571cbd141c40053e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="group___acquisition.html#gaf6d2f71af7a6dfd8571cbd141c40053e">mTouch_delayCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delay counter variable used in CVD scan sequence. </p>

<p>Definition at line <a class="el" href="m_touch__acquisition_8c_source.html#l00092">92</a> of file <a class="el" href="m_touch__acquisition_8c_source.html">mTouch_acquisition.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga800eae7ce7292a55c5d60975179ea26a"></a><!-- doxytag: member="mTouch_acquisition.c::mTouch_jitter" ref="ga800eae7ce7292a55c5d60975179ea26a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="group___acquisition.html#ga800eae7ce7292a55c5d60975179ea26a">mTouch_jitter</a> = 0x55</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores the current random seed value for jittering. </p>

<p>Definition at line <a class="el" href="m_touch__acquisition_8c_source.html#l00108">108</a> of file <a class="el" href="m_touch__acquisition_8c_source.html">mTouch_acquisition.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga6890b3a94dbdd045d66ec2b025cddda6"></a><!-- doxytag: member="mTouch_acquisition.c::mTouch_lastResult" ref="ga6890b3a94dbdd045d66ec2b025cddda6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="group___acquisition.html#ga6890b3a94dbdd045d66ec2b025cddda6">mTouch_lastResult</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores the last active-mode ADC result for differential calculation. </p>

<p>Definition at line <a class="el" href="m_touch__acquisition_8c_source.html#l00091">91</a> of file <a class="el" href="m_touch__acquisition_8c_source.html">mTouch_acquisition.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>mTouch Framework v2.3 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
