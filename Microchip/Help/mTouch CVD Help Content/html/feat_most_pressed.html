<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch Framework: Most-Pressed Algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_framework_features.html">Features</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Most-Pressed Algorithm </h1>  </div>
</div>
<div class="contents">
<p>The mTouch Framework can be configured to only allow a single mTouch sensor to be activated at a time, if desired. If a matrix is being implemented, the matrix sensors will be separated from the non-matrixed sensors and only the non-matrixed sensors will be limited to one-pressed-at-a-time.</p>
<h2><a class="anchor" id="featMostPressed-How"></a>
How It Works</h2>
<p>The mTouch Framework will scan all sensors as normal. When a new set of readings is available, the framework will first perform some logic to determine which row and which column is the most pressed of the matrix. If both a row and column are activated, the state machine for the sensors will begin debouncing the result. After the required number of repeated results, the matrix coordinate-output will be updated.</p>
<h2><a class="anchor" id="featMostPressed-Config"></a>
Most-Pressed Algorithm Configuration</h2>
<ol>
<li>
Configure the matrix'd sensors to be scanned as normal sensors in the <a class="el" href="m_touch__config_8h.html" title="Framework Configuration! Main configuration file for the mTouch Framework.">mTouch_config.h</a> file. We will be defining index ranges for the rows and columns, so when configuring the MTOUCH_SENSORx list, make sure to place the matrix sensors as a continuous group starting at 0 or place at the very end with no 'normal' sensors after it. Within the matrix list, the rows should be grouped together and the columns should be grouped together. </li>
<li>
At the bottom of <a class="el" href="m_touch__config_8h.html" title="Framework Configuration! Main configuration file for the mTouch Framework.">mTouch_config.h</a> is the 'Decoding' section which contains the matrix configuration options. <ol type="a">
<li>
Uncomment MTOUCH_MOST_PRESSED_ONLY to enable the most-pressed algorithm on <b>normal</b> mTouch sensors. <ul>
<li>
Matrix sensors are automatically compared against fellow row and column sensors to find the most-pressed. This will not affect them. </li>
<li>
Proximity sensors use a separate decode state machine and, so, are also excluded from this algorithm. This means you can have a matrix decoding normally, a proximity sensor providing constant data, and several 'normal' mTouch sensors that may only be activated one-at-a-time based on the highest shift value. </li>
</ul>
</li>
<li>
Define <a class="el" href="group___configuration.html#ga4d90fdf18567ae9298a47b4c50862756" title="This configuration option determines how much more pressed the most-pressed sensor must be above all ...">MTOUCH_MOST_PRESSED_THRESHOLD</a> with the number of counts that the most pressed sensor must be above the second-most-pressed sensor to activate the algorithm. If this value is set to 10 and the two most-pressed sensors shifts are only different by 5 counts, no sensors will be activated. </li>
</ol>
</li>
</ol>
<h2><a class="anchor" id="featMostPressed-Ex"></a>
Example</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #define MTOUCH_MOST_PRESSED_ONLY</span>
<span class="preprocessor"> #define MTOUCH_MOST_PRESSED_THRESHOLD   10</span>
</pre></div><h2><a class="anchor" id="featMostPressed-Out"></a>
Most-Pressed Output</h2>
<p>There are no special API or output macros for the most-pressed algorithm. Treat them as normal sensors. </p>
</div>
<hr class="footer"/><address class="footer"><small>mTouch Framework v2.3 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
