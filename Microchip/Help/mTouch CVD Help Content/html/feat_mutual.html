<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch Framework: Mutual Coupling Drives</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_framework_features.html">Features</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Mutual Coupling Drives </h1>  </div>
</div>
<div class="contents">
<p>In some cases, you may wish to measure the amount of coupling between a driven pin and a capacitive sensor. Detecting ungrounded metal, for instance, is not always easily done with a normal CVD scan. The metal will not cause a large enough change in the capacitance of the sensor since it is floating.</p>
<p>Mutual drives can be used to look for an increase in the coupling between two traces. As that piece of floating metal (or a human finger, or...) comes near, the coupling between the two traces will increase. (The relative permativity between them is increasing.)</p>
<p>This allows for two different capacitive features to be measured at once: </p>
<ul>
<li>
The <b>self capacitance</b> of the sensor, determined by the relationship between the capacitance of the external sensor with the capacitance of the internal ADC hold capacitor. <ul>
<li>
(Default mTouch Scan) </li>
</ul>
</li>
<li>
The <b>coupling</b> between the external sensor and the mutual drive. <ul>
<li>
(Mutual Sensor Drive) </li>
</ul>
</li>
</ul>
<dl class="note"><dt><b>Note:</b></dt><dd>One mutual drive can be shared among all sensors. <div align="center">
<img src="mutualLines.JPG" alt="mutualLines.JPG"/>
<p><strong>Mutual Field Lines with and without Increased Coupling</strong></p></div>
 </dd></dl>
<h2><a class="anchor" id="featMutual-How"></a>
How It Works</h2>
<p>When the CVD_MUTUAL_ENABLED option in <a class="el" href="m_touch__config__cvd_advanced_8h.html" title="Framework Configuration! Advanced CVD Scanning Options.">mTouch_config_cvdAdvanced.h</a> is used, the defined mutual pin is driven so that increased coupling (between the mutual drive and the sensor) will cause a shift in the same direction as adding capacitance to the sensor. Both the CVD scan and the mutual drive will be occuring at the same time. This means you are getting the benefit of both scans in one. As the distance between the object-to-be-detected and the sensor gets smaller, the impact of the mutual scan will increase. As the distance gets larger, the self-capacitance mTouch scan will provide a majority of the sensitivity.</p>
<div align="center">
<img src="mutualWaveform.JPG" alt="mutualWaveform.JPG"/>
<p><strong>Mutual driving during a normal mTouch scan</strong></p></div>
 <h2><a class="anchor" id="featMutual-Config"></a>
Mutual Sensor Configuration</h2>
<ol>
<li>
Open the <a class="el" href="m_touch__config__cvd_advanced_8h.html" title="Framework Configuration! Advanced CVD Scanning Options.">mTouch_config_cvdAdvanced.h</a> file and uncomment CVD_MUTUAL_ENABLED </li>
<li>
Set <a class="el" href="group___configuration.html#gaccc2b061102c76b09c7bcc7042ed73a1" title="If CVD_MUTUAL_ENABLED is defined, determines what LAT register is used for the mutual sensor...">CVD_MUTUAL_LAT</a> to the exact LAT or PORT bit for the mutual drive. </li>
<li>
Set <a class="el" href="group___configuration.html#gadb27e5c17cf6da9d9ca735ea52fdae93" title="If CVD_MUTUAL_ENABLED is defined, determines which pin is used for the mutual sensor.">CVD_MUTUAL_TRIS</a> to the exact TRIS bit for the mutual drive. </li>
</ol>
<h2><a class="anchor" id="featMutual-Ex"></a>
Example</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #define CVD_MUTUAL_ENABLED                        // &lt;-- Enables a mutual drive during the mTouch scan</span>
<span class="preprocessor"></span> <span class="comment">//#define CVD_MUTUAL_EXCLUSIVE_ENABLED            // &lt;-- NOT defined!</span>
<span class="preprocessor"> #define CVD_MUTUAL_LAT                    LATA3   // &lt;-- The mutual sensor&#39;s LAT pin label</span>
<span class="preprocessor"> #define CVD_MUTUAL_TRIS                   TRISA3  // &lt;-- The mutual sensor&#39;s TRIS pin label</span>
</pre></div> <div class="fragment"><pre class="fragment"> <span class="comment">//#define CVD_MUTUAL_ENABLED                      // &lt;-- NOT defined!</span>
<span class="preprocessor"> #define CVD_MUTUAL_EXCLUSIVE_ENABLED              // &lt;-- Scanning ONLY with mutual coupling </span>
<span class="preprocessor"></span>                                                   <span class="comment">//      and NO self-capacitance mTouch scan.</span>
<span class="preprocessor"> #define CVD_MUTUAL_LAT                    LATC1   // &lt;-- The mutual sensor&#39;s LAT pin label</span>
<span class="preprocessor"> #define CVD_MUTUAL_TRIS                   TRISC1  // &lt;-- The mutual sensor&#39;s TRIS pin label</span>
</pre></div><h2><a class="anchor" id="featMutual-Out"></a>
Mutual Sensor Output</h2>
<p>There is no change to the mTouch API when using a mutual drive sensor. </p>
</div>
<hr class="footer"/><address class="footer"><small>mTouch Framework v2.3 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
